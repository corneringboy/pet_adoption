{% extends 'new_pets/base.html' %}  <!-- Assuming you have a base template -->

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
    /* Background and page styling */
    body {
        background: linear-gradient(135deg, #f8f9fa, #dbeafe);
        font-family: 'Poppins', sans-serif;
    }

    .container-wrapper {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 30px;
    }

    .pet-container {
        width: 90%;
        overflow-x: auto;
        white-space: nowrap;
        padding: 20px;
        background: #ffffff;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        transition: 0.3s;
    }

    .pet-container:hover {
        transform: scale(1.02);
    }

    .pet-list {
        display: flex;
        gap: 15px;
    }

    .pet-box {
        display: inline-block;
        width: 300px;
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 15px;
        text-align: center;
        background: #f9f9f9;
        box-shadow: 3px 3px 10px rgba(0,0,0,0.1);
        transition: 0.3s ease-in-out;
    }

    .pet-box:hover {
        transform: translateY(-5px);
    }

    .pet-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
    }

    .details-dropdown {
        margin-top: 10px;
        padding: 10px;
        background: #eef2ff;
        border-radius: 8px;
    }

    /* Buttons */
    .btn-primary {
        background: #007bff;
        border: none;
        transition: 0.3s;
    }

    .btn-primary:hover {
        background: #0056b3;
    }

    .btn-success {
        background: #28a745;
        border: none;
        transition: 0.3s;
    }

    .btn-success:hover {
        background: #1e7e34;
    }

    .btn-warning {
        background: #ffc107;
        border: none;
        transition: 0.3s;
    }

    .btn-warning:hover {
        background: #e0a800;
    }
</style>

<div class="container mt-4">
    <h2 class="text-center mb-4 text-primary">üê∂ Available Pets for Adoption üêæ</h2>

    <div class="container-wrapper">
        <div class="pet-container">
            <div class="pet-list">
                {% for pet in pets %}
                <div class="pet-box">
                    <img src="{{ pet.image.url }}" class="pet-image" alt="{{ pet.name }}">
                    <h3>{{ pet.name }}</h3>
                    <p><strong>Breed:</strong> {{ pet.breed }}</p>
                    <p><strong>Age:</strong> {{ pet.age }} years</p>
                    <p><strong>Status:</strong> {{ pet.adoption_status }}</p>

                    <button class="btn btn-primary" onclick="toggleDetails('{{ pet.id }}')">View Details</button>
                    <div id="details-{{ pet.id }}" class="details-dropdown" style="display: none;">
                        <p>{{ pet.description }}</p>
                        {% if user.is_authenticated %}
                            <button class="btn btn-success" onclick="showSellerDetails('{{ pet.id }}')">Interested</button>
                            <div id="seller-{{ pet.id }}" class="seller-details" style="display: none;">
                                <p><strong>Seller:</strong> {{ pet.seller.full_name }}</p>
                                <p><strong>Phone:</strong> {{ pet.seller.phone_number }}</p>
                                <p><strong>Email:</strong> {{ pet.seller.email }}</p>
                                <p><strong>Address:</strong> {{ pet.seller.store_location }}</p>

                            </div>
                        {% else %}
                            <button class="btn btn-warning" onclick="window.location.href='{% url 'login' %}'">Interested? Login First</button>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<script>
    function toggleDetails(petId) {
        var detailsDiv = document.getElementById("details-" + petId);
        detailsDiv.style.display = detailsDiv.style.display === "none" ? "block" : "none";
    }

    function showSellerDetails(petId) {
        var sellerDiv = document.getElementById("seller-" + petId);
        sellerDiv.style.display = sellerDiv.style.display === "none" ? "block" : "none";
    }
</script>
{% endblock %}

